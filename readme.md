# decompress-request

> Decompress an incoming HTTP request if needed.

[![NPM](https://img.shields.io/npm/v/decompress-request.svg)](https://www.npmjs.com/package/decompress-request) [![Build Status](https://travis-ci.com/saasify-sh/decompress-request.svg?branch=master)](https://travis-ci.com/saasify-sh/decompress-request) [![JavaScript Style Guide](https://img.shields.io/badge/code_style-standard-brightgreen.svg)](https://standardjs.com)

Decompresses an incoming http request if it's gzipped, deflated or compressed with Brotli, otherwise just passes it through.

## Install

```bash
npm install --save decompress-request
```

## Usage

```js
const http = require('http')
const raw = require('raw-body')
const decompressRequest = require('decompress-request')

const server = http.createServer(async (req, res) => {
  req = decompressRequest(req)

  // The request stream is now guaranteed to be inflated / decompressed.
  // You can use it as you would in any http handler.

  // rawBody is an uncompressed Buffer containing the raw request body
  const rawBody = await raw(req, opts)

  // body would contain the request body as a JSON object assuming it was application/json
  const body = JSON.parse(rawBody.toString('utf8'))
})

server.listen(3000)
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### decompressRequest

Decompresses an incoming HTTP request body stream if needed.

Type: `function (request): IncomingMessage`

-   `request` **IncomingMessage**

## Related

-   [decompress-response](https://github.com/sindresorhus/decompress-response) - Same as this module but for handling http responses.
-   [inflation](https://github.com/stream-utils/inflation) - Same as this module but doesn't handle Brotli.

## License

MIT Â© [Saasify](https://saasify.sh)
